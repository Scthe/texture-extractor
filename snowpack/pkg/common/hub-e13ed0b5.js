/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var U=function(e,t){return U=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},U(e,t)};function Nt(e,t){U(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var a=function(){return a=Object.assign||function(t){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},a.apply(this,arguments)};function xt(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}function et(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function rt(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],s;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(u){s={error:u}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o}function S(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(rt(arguments[t]));return e}var v;(function(e){e.Ok="ok",e.Exited="exited",e.Crashed="crashed",e.Abnormal="abnormal"})(v||(v={}));var nt;(function(e){e.Ok="ok",e.Errored="errored",e.Crashed="crashed"})(nt||(nt={}));function it(e){switch(Object.prototype.toString.call(e)){case"[object Error]":return!0;case"[object Exception]":return!0;case"[object DOMException]":return!0;default:return R(e,Error)}}function jt(e){return Object.prototype.toString.call(e)==="[object ErrorEvent]"}function kt(e){return Object.prototype.toString.call(e)==="[object DOMError]"}function Rt(e){return Object.prototype.toString.call(e)==="[object DOMException]"}function B(e){return Object.prototype.toString.call(e)==="[object String]"}function C(e){return e===null||typeof e!="object"&&typeof e!="function"}function L(e){return Object.prototype.toString.call(e)==="[object Object]"}function ot(e){return typeof Event!="undefined"&&R(e,Event)}function st(e){return typeof Element!="undefined"&&R(e,Element)}function At(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function z(e){return Boolean(e&&e.then&&typeof e.then=="function")}function Pt(e){return L(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e}function R(e,t){try{return e instanceof t}catch(r){return!1}}function F(e,t){try{for(var r=e,n=5,i=80,o=[],s=0,u=0,c=" > ",p=c.length,f=void 0;r&&s++<n&&(f=Dt(r,t),!(f==="html"||s>1&&u+o.length*p+f.length>=i));)o.push(f),u+=f.length,r=r.parentNode;return o.reverse().join(c)}catch(h){return"<unknown>"}}function Dt(e,t){var r,n,i=e,o=[],s,u,c,p,f;if(!i||!i.tagName)return"";o.push(i.tagName.toLowerCase());var h=((r=t)===null||r===void 0?void 0:r.length)?t.filter(function(l){return i.getAttribute(l)}).map(function(l){return[l,i.getAttribute(l)]}):null;if((n=h)===null||n===void 0?void 0:n.length)h.forEach(function(l){o.push("["+l[0]+'="'+l[1]+'"]')});else if(i.id&&o.push("#"+i.id),s=i.className,s&&B(s))for(u=s.split(/\s+/),f=0;f<u.length;f++)o.push("."+u[f]);var k=["type","name","title","alt"];for(f=0;f<k.length;f++)c=k[f],p=i.getAttribute(c),p&&o.push("["+c+'="'+p+'"]');return o.join("")}function at(){throw new Error("setTimeout has not been defined")}function ut(){throw new Error("clearTimeout has not been defined")}var y=at,m=ut,T;typeof window!="undefined"?T=window:typeof self!="undefined"?T=self:T={},typeof T.setTimeout=="function"&&(y=setTimeout),typeof T.clearTimeout=="function"&&(m=clearTimeout);function ft(e){if(y===setTimeout)return setTimeout(e,0);if((y===at||!y)&&setTimeout)return y=setTimeout,setTimeout(e,0);try{return y(e,0)}catch(t){try{return y.call(null,e,0)}catch(r){return y.call(this,e,0)}}}function Lt(e){if(m===clearTimeout)return clearTimeout(e);if((m===ut||!m)&&clearTimeout)return m=clearTimeout,clearTimeout(e);try{return m(e)}catch(t){try{return m.call(null,e)}catch(r){return m.call(this,e)}}}var _=[],N=!1,E,I=-1;function It(){!N||!E||(N=!1,E.length?_=E.concat(_):I=-1,_.length&&ct())}function ct(){if(!N){var e=ft(It);N=!0;for(var t=_.length;t;){for(E=_,_=[];++I<t;)E&&E[I].run();I=-1,t=_.length}E=null,N=!1,Lt(e)}}function Mt(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];_.push(new pt(e,t)),_.length===1&&!N&&ft(ct)}function pt(e,t){this.fun=e,this.array=t}pt.prototype.run=function(){this.fun.apply(null,this.array)};var Yt="browser",Ht="browser",qt=!0,Ut=[],Bt="",Ct={},zt={},Ft={};function w(){}var Jt=w,Vt=w,Gt=w,Wt=w,Qt=w,Xt=w,$t=w;function Zt(e){throw new Error("process.binding is not supported")}function Kt(){return"/"}function te(e){throw new Error("process.chdir is not supported")}function ee(){return 0}var x=T.performance||{},re=x.now||x.mozNow||x.msNow||x.oNow||x.webkitNow||function(){return new Date().getTime()};function ne(e){var t=re.call(x)*.001,r=Math.floor(t),n=Math.floor(t%1*1e9);return e&&(r=r-e[0],n=n-e[1],n<0&&(r--,n+=1e9)),[r,n]}var ie=new Date;function oe(){var e=new Date,t=e-ie;return t/1e3}var lt={nextTick:Mt,title:Yt,browser:qt,env:{NODE_ENV:"production"},argv:Ut,version:Bt,versions:Ct,on:Jt,addListener:Vt,once:Gt,off:Wt,removeListener:Qt,removeAllListeners:Xt,emit:$t,binding:Zt,cwd:Kt,chdir:te,umask:ee,hrtime:ne,platform:Ht,release:zt,config:Ft,uptime:oe};function M(){return Object.prototype.toString.call(typeof lt!="undefined"?lt:0)==="[object process]"}function A(e,t){return e.require(t)}function se(e){var t;try{t=A(module,e)}catch(n){}try{var r=A(module,"process").cwd;t=A(module,r()+"/node_modules/"+e)}catch(n){}return t}function J(e,t){return t===void 0&&(t=0),typeof e!="string"||t===0||e.length<=t?e:e.substr(0,t)+"..."}function ae(e,t){if(!Array.isArray(e))return"";for(var r=[],n=0;n<e.length;n++){var i=e[n];try{r.push(String(i))}catch(o){r.push("[value cannot be serialized]")}}return r.join(t)}function ue(e,t){return B(e)?At(t)?t.test(e):typeof t=="string"?e.indexOf(t)!==-1:!1:!1}var fe={};function d(){return M()?global:typeof window!="undefined"?window:typeof self!="undefined"?self:fe}function j(){var e=d(),t=e.crypto||e.msCrypto;if(t!==void 0&&t.getRandomValues){var r=new Uint16Array(8);t.getRandomValues(r),r[3]=r[3]&4095|16384,r[4]=r[4]&16383|32768;var n=function(i){for(var o=i.toString(16);o.length<4;)o="0"+o;return o};return n(r[0])+n(r[1])+n(r[2])+n(r[3])+n(r[4])+n(r[5])+n(r[6])+n(r[7])}return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(i){var o=Math.random()*16|0,s=i==="x"?o:o&3|8;return s.toString(16)})}function ce(e){if(!e)return{};var t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};var r=t[6]||"",n=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],relative:t[5]+r+n}}function pe(e){if(e.message)return e.message;if(e.exception&&e.exception.values&&e.exception.values[0]){var t=e.exception.values[0];return t.type&&t.value?t.type+": "+t.value:t.type||t.value||e.event_id||"<unknown>"}return e.event_id||"<unknown>"}function Y(e){var t=d(),r=["debug","info","warn","error","log","assert"];if(!("console"in t))return e();var n=t.console,i={};r.forEach(function(s){s in t.console&&n[s].__sentry_original__&&(i[s]=n[s],n[s]=n[s].__sentry_original__)});var o=e();return Object.keys(i).forEach(function(s){n[s]=i[s]}),o}function le(e,t,r){e.exception=e.exception||{},e.exception.values=e.exception.values||[],e.exception.values[0]=e.exception.values[0]||{},e.exception.values[0].value=e.exception.values[0].value||t||"",e.exception.values[0].type=e.exception.values[0].type||r||"Error"}function he(e,t){t===void 0&&(t={});try{e.exception.values[0].mechanism=e.exception.values[0].mechanism||{},Object.keys(t).forEach(function(r){e.exception.values[0].mechanism[r]=t[r]})}catch(r){}}function _e(){try{return document.location.href}catch(e){return""}}var ht=60*1e3;function de(e,t){if(!t)return ht;var r=parseInt(""+t,10);if(!isNaN(r))return r*1e3;var n=Date.parse(""+t);return isNaN(n)?ht:n-e}var O=d(),V="Sentry Logger ",ge=function(){function e(){this._enabled=!1}return e.prototype.disable=function(){this._enabled=!1},e.prototype.enable=function(){this._enabled=!0},e.prototype.log=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];!this._enabled||Y(function(){O.console.log(V+"[Log]: "+t.join(" "))})},e.prototype.warn=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];!this._enabled||Y(function(){O.console.warn(V+"[Warn]: "+t.join(" "))})},e.prototype.error=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];!this._enabled||Y(function(){O.console.error(V+"[Error]: "+t.join(" "))})},e}();O.__SENTRY__=O.__SENTRY__||{};var G=O.__SENTRY__.logger||(O.__SENTRY__.logger=new ge),ve=function(){function e(){this._hasWeakSet=typeof WeakSet=="function",this._inner=this._hasWeakSet?new WeakSet:[]}return e.prototype.memoize=function(t){if(this._hasWeakSet)return this._inner.has(t)?!0:(this._inner.add(t),!1);for(var r=0;r<this._inner.length;r++){var n=this._inner[r];if(n===t)return!0}return this._inner.push(t),!1},e.prototype.unmemoize=function(t){if(this._hasWeakSet)this._inner.delete(t);else for(var r=0;r<this._inner.length;r++)if(this._inner[r]===t){this._inner.splice(r,1);break}},e}(),W="<anonymous>";function _t(e){try{return!e||typeof e!="function"?W:e.name||W}catch(t){return W}}function ye(e,t,r){if(t in e){var n=e[t],i=r(n);if(typeof i=="function")try{i.prototype=i.prototype||{},Object.defineProperties(i,{__sentry_original__:{enumerable:!1,value:n}})}catch(o){}e[t]=i}}function me(e){return Object.keys(e).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])}).join("&")}function dt(e){if(it(e)){var t=e,r={message:t.message,name:t.name,stack:t.stack};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n]);return r}if(ot(e)){var i=e,o={};o.type=i.type;try{o.target=st(i.target)?F(i.target):Object.prototype.toString.call(i.target)}catch(s){o.target="<unknown>"}try{o.currentTarget=st(i.currentTarget)?F(i.currentTarget):Object.prototype.toString.call(i.currentTarget)}catch(s){o.currentTarget="<unknown>"}typeof CustomEvent!="undefined"&&R(e,CustomEvent)&&(o.detail=i.detail);for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(o[n]=i);return o}return e}function be(e){return~-encodeURI(e).split(/%..|./).length}function Se(e){return be(JSON.stringify(e))}function gt(e,t,r){t===void 0&&(t=3),r===void 0&&(r=100*1024);var n=mt(e,t);return Se(n)>r?gt(e,t-1,r):n}function Ee(e){var t=Object.prototype.toString.call(e);if(typeof e=="string")return e;if(t==="[object Object]")return"[Object]";if(t==="[object Array]")return"[Array]";var r=vt(e);return C(r)?r:t}function vt(e,t){return t==="domain"&&e&&typeof e=="object"&&e._events?"[Domain]":t==="domainEmitter"?"[DomainEmitter]":typeof global!="undefined"&&e===global?"[Global]":typeof window!="undefined"&&e===window?"[Window]":typeof document!="undefined"&&e===document?"[Document]":Pt(e)?"[SyntheticEvent]":typeof e=="number"&&e!==e?"[NaN]":e===void 0?"[undefined]":typeof e=="function"?"[Function: "+_t(e)+"]":typeof e=="symbol"?"["+String(e)+"]":typeof e=="bigint"?"[BigInt: "+String(e)+"]":e}function yt(e,t,r,n){if(r===void 0&&(r=Infinity),n===void 0&&(n=new ve),r===0)return Ee(t);if(t!=null&&typeof t.toJSON=="function")return t.toJSON();var i=vt(t,e);if(C(i))return i;var o=dt(t),s=Array.isArray(t)?[]:{};if(n.memoize(t))return"[Circular ~]";for(var u in o)!Object.prototype.hasOwnProperty.call(o,u)||(s[u]=yt(u,o[u],r-1,n));return n.unmemoize(t),s}function mt(e,t){try{return JSON.parse(JSON.stringify(e,function(r,n){return yt(r,n,t)}))}catch(r){return"**non-serializable**"}}function we(e,t){t===void 0&&(t=40);var r=Object.keys(dt(e));if(r.sort(),!r.length)return"[object has no keys]";if(r[0].length>=t)return J(r[0],t);for(var n=r.length;n>0;n--){var i=r.slice(0,n).join(", ");if(!(i.length>t))return n===r.length?i:J(i,t)}return""}function P(e){var t,r;if(L(e)){var n=e,i={};try{for(var o=et(Object.keys(n)),s=o.next();!s.done;s=o.next()){var u=s.value;typeof n[u]!="undefined"&&(i[u]=P(n[u]))}}catch(c){t={error:c}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return i}return Array.isArray(e)?e.map(P):e}var g;(function(e){e.PENDING="PENDING",e.RESOLVED="RESOLVED",e.REJECTED="REJECTED"})(g||(g={}));var bt=function(){function e(t){var r=this;this._state=g.PENDING,this._handlers=[],this._resolve=function(n){r._setResult(g.RESOLVED,n)},this._reject=function(n){r._setResult(g.REJECTED,n)},this._setResult=function(n,i){if(r._state===g.PENDING){if(z(i)){i.then(r._resolve,r._reject);return}r._state=n,r._value=i,r._executeHandlers()}},this._attachHandler=function(n){r._handlers=r._handlers.concat(n),r._executeHandlers()},this._executeHandlers=function(){if(r._state!==g.PENDING){var n=r._handlers.slice();r._handlers=[],n.forEach(function(i){i.done||(r._state===g.RESOLVED&&i.onfulfilled&&i.onfulfilled(r._value),r._state===g.REJECTED&&i.onrejected&&i.onrejected(r._value),i.done=!0)})}};try{t(this._resolve,this._reject)}catch(n){this._reject(n)}}return e.resolve=function(t){return new e(function(r){r(t)})},e.reject=function(t){return new e(function(r,n){n(t)})},e.all=function(t){return new e(function(r,n){if(!Array.isArray(t)){n(new TypeError("Promise.all requires an array as input."));return}if(t.length===0){r([]);return}var i=t.length,o=[];t.forEach(function(s,u){e.resolve(s).then(function(c){o[u]=c,i-=1,i===0&&r(o)}).then(null,n)})})},e.prototype.then=function(t,r){var n=this;return new e(function(i,o){n._attachHandler({done:!1,onfulfilled:function(s){if(!t){i(s);return}try{i(t(s));return}catch(u){o(u);return}},onrejected:function(s){if(!r){o(s);return}try{i(r(s));return}catch(u){o(u);return}}})})},e.prototype.catch=function(t){return this.then(function(r){return r},t)},e.prototype.finally=function(t){var r=this;return new e(function(n,i){var o,s;return r.then(function(u){s=!1,o=u,t&&t()},function(u){s=!0,o=u,t&&t()}).then(function(){if(s){i(o);return}n(o)})})},e.prototype.toString=function(){return"[object SyncPromise]"},e}(),Q={nowSeconds:function(){return Date.now()/1e3}};function Oe(){var e=d().performance;if(!(!e||!e.now)){var t=Date.now()-e.now();return{now:function(){return e.now()},timeOrigin:t}}}function Te(){try{var e=A(module,"perf_hooks");return e.performance}catch(t){return}}var X=M()?Te():Oe(),St=X===void 0?Q:{nowSeconds:function(){return(X.timeOrigin+X.now())/1e3}},$=Q.nowSeconds.bind(Q),Z=St.nowSeconds.bind(St),Ne=Z,xe=function(){var e=d().performance;if(!(!e||!e.now)){var t=3600*1e3,r=e.now(),n=Date.now(),i=e.timeOrigin?Math.abs(e.timeOrigin+r-n):t,o=i<t,s=e.timing&&e.timing.navigationStart,u=typeof s=="number",c=u?Math.abs(s+r-n):t,p=c<t;return o||p?i<=c?e.timeOrigin:s:n}}(),Et=100,H=function(){function e(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._user={},this._tags={},this._extra={},this._contexts={}}return e.clone=function(t){var r=new e;return t&&(r._breadcrumbs=S(t._breadcrumbs),r._tags=a({},t._tags),r._extra=a({},t._extra),r._contexts=a({},t._contexts),r._user=t._user,r._level=t._level,r._span=t._span,r._session=t._session,r._transactionName=t._transactionName,r._fingerprint=t._fingerprint,r._eventProcessors=S(t._eventProcessors),r._requestSession=t._requestSession),r},e.prototype.addScopeListener=function(t){this._scopeListeners.push(t)},e.prototype.addEventProcessor=function(t){return this._eventProcessors.push(t),this},e.prototype.setUser=function(t){return this._user=t||{},this._session&&this._session.update({user:t}),this._notifyScopeListeners(),this},e.prototype.getUser=function(){return this._user},e.prototype.getRequestSession=function(){return this._requestSession},e.prototype.setRequestSession=function(t){return this._requestSession=t,this},e.prototype.setTags=function(t){return this._tags=a(a({},this._tags),t),this._notifyScopeListeners(),this},e.prototype.setTag=function(t,r){var n;return this._tags=a(a({},this._tags),(n={},n[t]=r,n)),this._notifyScopeListeners(),this},e.prototype.setExtras=function(t){return this._extra=a(a({},this._extra),t),this._notifyScopeListeners(),this},e.prototype.setExtra=function(t,r){var n;return this._extra=a(a({},this._extra),(n={},n[t]=r,n)),this._notifyScopeListeners(),this},e.prototype.setFingerprint=function(t){return this._fingerprint=t,this._notifyScopeListeners(),this},e.prototype.setLevel=function(t){return this._level=t,this._notifyScopeListeners(),this},e.prototype.setTransactionName=function(t){return this._transactionName=t,this._notifyScopeListeners(),this},e.prototype.setTransaction=function(t){return this.setTransactionName(t)},e.prototype.setContext=function(t,r){var n;return r===null?delete this._contexts[t]:this._contexts=a(a({},this._contexts),(n={},n[t]=r,n)),this._notifyScopeListeners(),this},e.prototype.setSpan=function(t){return this._span=t,this._notifyScopeListeners(),this},e.prototype.getSpan=function(){return this._span},e.prototype.getTransaction=function(){var t,r,n,i,o=this.getSpan();if((t=o)===null||t===void 0?void 0:t.transaction)return(r=o)===null||r===void 0?void 0:r.transaction;if((i=(n=o)===null||n===void 0?void 0:n.spanRecorder)===null||i===void 0?void 0:i.spans[0])return o.spanRecorder.spans[0]},e.prototype.setSession=function(t){return t?this._session=t:delete this._session,this._notifyScopeListeners(),this},e.prototype.getSession=function(){return this._session},e.prototype.update=function(t){if(!t)return this;if(typeof t=="function"){var r=t(this);return r instanceof e?r:this}return t instanceof e?(this._tags=a(a({},this._tags),t._tags),this._extra=a(a({},this._extra),t._extra),this._contexts=a(a({},this._contexts),t._contexts),t._user&&Object.keys(t._user).length&&(this._user=t._user),t._level&&(this._level=t._level),t._fingerprint&&(this._fingerprint=t._fingerprint),t._requestSession&&(this._requestSession=t._requestSession)):L(t)&&(t=t,this._tags=a(a({},this._tags),t.tags),this._extra=a(a({},this._extra),t.extra),this._contexts=a(a({},this._contexts),t.contexts),t.user&&(this._user=t.user),t.level&&(this._level=t.level),t.fingerprint&&(this._fingerprint=t.fingerprint),t.requestSession&&(this._requestSession=t.requestSession)),this},e.prototype.clear=function(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this},e.prototype.addBreadcrumb=function(t,r){var n=typeof r=="number"?Math.min(r,Et):Et;if(n<=0)return this;var i=a({timestamp:$()},t);return this._breadcrumbs=S(this._breadcrumbs,[i]).slice(-n),this._notifyScopeListeners(),this},e.prototype.clearBreadcrumbs=function(){return this._breadcrumbs=[],this._notifyScopeListeners(),this},e.prototype.applyToEvent=function(t,r){var n;if(this._extra&&Object.keys(this._extra).length&&(t.extra=a(a({},this._extra),t.extra)),this._tags&&Object.keys(this._tags).length&&(t.tags=a(a({},this._tags),t.tags)),this._user&&Object.keys(this._user).length&&(t.user=a(a({},this._user),t.user)),this._contexts&&Object.keys(this._contexts).length&&(t.contexts=a(a({},this._contexts),t.contexts)),this._level&&(t.level=this._level),this._transactionName&&(t.transaction=this._transactionName),this._span){t.contexts=a({trace:this._span.getTraceContext()},t.contexts);var i=(n=this._span.transaction)===null||n===void 0?void 0:n.name;i&&(t.tags=a({transaction:i},t.tags))}return this._applyFingerprint(t),t.breadcrumbs=S(t.breadcrumbs||[],this._breadcrumbs),t.breadcrumbs=t.breadcrumbs.length>0?t.breadcrumbs:void 0,this._notifyEventProcessors(S(wt(),this._eventProcessors),t,r)},e.prototype._notifyEventProcessors=function(t,r,n,i){var o=this;return i===void 0&&(i=0),new bt(function(s,u){var c=t[i];if(r===null||typeof c!="function")s(r);else{var p=c(a({},r),n);z(p)?p.then(function(f){return o._notifyEventProcessors(t,f,n,i+1).then(s)}).then(null,u):o._notifyEventProcessors(t,p,n,i+1).then(s).then(null,u)}})},e.prototype._notifyScopeListeners=function(){var t=this;this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(function(r){r(t)}),this._notifyingListeners=!1)},e.prototype._applyFingerprint=function(t){t.fingerprint=t.fingerprint?Array.isArray(t.fingerprint)?t.fingerprint:[t.fingerprint]:[],this._fingerprint&&(t.fingerprint=t.fingerprint.concat(this._fingerprint)),t.fingerprint&&!t.fingerprint.length&&delete t.fingerprint},e}();function wt(){var e=d();return e.__SENTRY__=e.__SENTRY__||{},e.__SENTRY__.globalEventProcessors=e.__SENTRY__.globalEventProcessors||[],e.__SENTRY__.globalEventProcessors}function je(e){wt().push(e)}var ke=function(){function e(t){this.errors=0,this.sid=j(),this.duration=0,this.status=v.Ok,this.init=!0,this.ignoreDuration=!1;var r=Z();this.timestamp=r,this.started=r,t&&this.update(t)}return e.prototype.update=function(t){if(t===void 0&&(t={}),t.user&&(!this.ipAddress&&t.user.ip_address&&(this.ipAddress=t.user.ip_address),!this.did&&!t.did&&(this.did=t.user.id||t.user.email||t.user.username)),this.timestamp=t.timestamp||Z(),t.ignoreDuration&&(this.ignoreDuration=t.ignoreDuration),t.sid&&(this.sid=t.sid.length===32?t.sid:j()),t.init!==void 0&&(this.init=t.init),!this.did&&t.did&&(this.did=""+t.did),typeof t.started=="number"&&(this.started=t.started),this.ignoreDuration)this.duration=void 0;else if(typeof t.duration=="number")this.duration=t.duration;else{var r=this.timestamp-this.started;this.duration=r>=0?r:0}t.release&&(this.release=t.release),t.environment&&(this.environment=t.environment),!this.ipAddress&&t.ipAddress&&(this.ipAddress=t.ipAddress),!this.userAgent&&t.userAgent&&(this.userAgent=t.userAgent),typeof t.errors=="number"&&(this.errors=t.errors),t.status&&(this.status=t.status)},e.prototype.close=function(t){t?this.update({status:t}):this.status===v.Ok?this.update({status:v.Exited}):this.update()},e.prototype.toJSON=function(){return P({sid:""+this.sid,init:this.init,started:new Date(this.started*1e3).toISOString(),timestamp:new Date(this.timestamp*1e3).toISOString(),status:this.status,errors:this.errors,did:typeof this.did=="number"||typeof this.did=="string"?""+this.did:void 0,duration:this.duration,attrs:P({release:this.release,environment:this.environment,ip_address:this.ipAddress,user_agent:this.userAgent})})},e}(),K=4,Re=100,q=function(){function e(t,r,n){r===void 0&&(r=new H),n===void 0&&(n=K),this._version=n,this._stack=[{}],this.getStackTop().scope=r,this.bindClient(t)}return e.prototype.isOlderThan=function(t){return this._version<t},e.prototype.bindClient=function(t){var r=this.getStackTop();r.client=t,t&&t.setupIntegrations&&t.setupIntegrations()},e.prototype.pushScope=function(){var t=H.clone(this.getScope());return this.getStack().push({client:this.getClient(),scope:t}),t},e.prototype.popScope=function(){return this.getStack().length<=1?!1:!!this.getStack().pop()},e.prototype.withScope=function(t){var r=this.pushScope();try{t(r)}finally{this.popScope()}},e.prototype.getClient=function(){return this.getStackTop().client},e.prototype.getScope=function(){return this.getStackTop().scope},e.prototype.getStack=function(){return this._stack},e.prototype.getStackTop=function(){return this._stack[this._stack.length-1]},e.prototype.captureException=function(t,r){var n=this._lastEventId=j(),i=r;if(!r){var o=void 0;try{throw new Error("Sentry syntheticException")}catch(s){o=s}i={originalException:t,syntheticException:o}}return this._invokeClient("captureException",t,a(a({},i),{event_id:n})),n},e.prototype.captureMessage=function(t,r,n){var i=this._lastEventId=j(),o=n;if(!n){var s=void 0;try{throw new Error(t)}catch(u){s=u}o={originalException:t,syntheticException:s}}return this._invokeClient("captureMessage",t,r,a(a({},o),{event_id:i})),i},e.prototype.captureEvent=function(t,r){var n=this._lastEventId=j();return this._invokeClient("captureEvent",t,a(a({},r),{event_id:n})),n},e.prototype.lastEventId=function(){return this._lastEventId},e.prototype.addBreadcrumb=function(t,r){var n=this.getStackTop(),i=n.scope,o=n.client;if(!(!i||!o)){var s=o.getOptions&&o.getOptions()||{},u=s.beforeBreadcrumb,c=u===void 0?null:u,p=s.maxBreadcrumbs,f=p===void 0?Re:p;if(!(f<=0)){var h=$(),k=a({timestamp:h},t),l=c?Y(function(){return c(k,r)}):k;l!==null&&i.addBreadcrumb(l,f)}}},e.prototype.setUser=function(t){var r=this.getScope();r&&r.setUser(t)},e.prototype.setTags=function(t){var r=this.getScope();r&&r.setTags(t)},e.prototype.setExtras=function(t){var r=this.getScope();r&&r.setExtras(t)},e.prototype.setTag=function(t,r){var n=this.getScope();n&&n.setTag(t,r)},e.prototype.setExtra=function(t,r){var n=this.getScope();n&&n.setExtra(t,r)},e.prototype.setContext=function(t,r){var n=this.getScope();n&&n.setContext(t,r)},e.prototype.configureScope=function(t){var r=this.getStackTop(),n=r.scope,i=r.client;n&&i&&t(n)},e.prototype.run=function(t){var r=Ot(this);try{t(this)}finally{Ot(r)}},e.prototype.getIntegration=function(t){var r=this.getClient();if(!r)return null;try{return r.getIntegration(t)}catch(n){return G.warn("Cannot retrieve integration "+t.id+" from the current Hub"),null}},e.prototype.startSpan=function(t){return this._callExtensionMethod("startSpan",t)},e.prototype.startTransaction=function(t,r){return this._callExtensionMethod("startTransaction",t,r)},e.prototype.traceHeaders=function(){return this._callExtensionMethod("traceHeaders")},e.prototype.captureSession=function(t){if(t===void 0&&(t=!1),t)return this.endSession();this._sendSessionUpdate()},e.prototype.endSession=function(){var t,r,n,i,o;(n=(r=(t=this.getStackTop())===null||t===void 0?void 0:t.scope)===null||r===void 0?void 0:r.getSession())===null||n===void 0||n.close(),this._sendSessionUpdate(),(o=(i=this.getStackTop())===null||i===void 0?void 0:i.scope)===null||o===void 0||o.setSession()},e.prototype.startSession=function(t){var r=this.getStackTop(),n=r.scope,i=r.client,o=i&&i.getOptions()||{},s=o.release,u=o.environment,c=d(),p=(c.navigator||{}).userAgent,f=new ke(a(a(a({release:s,environment:u},n&&{user:n.getUser()}),p&&{userAgent:p}),t));if(n){var h=n.getSession&&n.getSession();h&&h.status===v.Ok&&h.update({status:v.Exited}),this.endSession(),n.setSession(f)}return f},e.prototype._sendSessionUpdate=function(){var t=this.getStackTop(),r=t.scope,n=t.client;if(!!r){var i=r.getSession&&r.getSession();i&&n&&n.captureSession&&n.captureSession(i)}},e.prototype._invokeClient=function(t){for(var r,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var o=this.getStackTop(),s=o.scope,u=o.client;u&&u[t]&&(r=u)[t].apply(r,S(n,[s]))},e.prototype._callExtensionMethod=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var i=D(),o=i.__SENTRY__;if(o&&o.extensions&&typeof o.extensions[t]=="function")return o.extensions[t].apply(this,r);G.warn("Extension method "+t+" couldn't be found, doing nothing.")},e}();function D(){var e=d();return e.__SENTRY__=e.__SENTRY__||{extensions:{},hub:void 0},e}function Ot(e){var t=D(),r=b(t);return tt(t,e),r}function Ae(){var e=D();return(!Tt(e)||b(e).isOlderThan(K))&&tt(e,new q),M()?Pe(e):b(e)}function Pe(e){var t,r,n;try{var i=(n=(r=(t=D().__SENTRY__)===null||t===void 0?void 0:t.extensions)===null||r===void 0?void 0:r.domain)===null||n===void 0?void 0:n.active;if(!i)return b(e);if(!Tt(i)||b(i).isOlderThan(K)){var o=b(e).getStackTop();tt(i,new q(o.client,H.clone(o.scope)))}return b(i)}catch(s){return b(e)}}function Tt(e){return!!(e&&e.__SENTRY__&&e.__SENTRY__.hub)}function b(e){return e&&e.__SENTRY__&&e.__SENTRY__.hub||(e.__SENTRY__=e.__SENTRY__||{},e.__SENTRY__.hub=new q),e.__SENTRY__.hub}function tt(e,t){return e?(e.__SENTRY__=e.__SENTRY__||{},e.__SENTRY__.hub=t,!0):!1}export{xt as A,pe as B,ue as C,de as D,d as E,B as F,_e as G,ye as H,_t as I,ae as J,F as K,ce as L,R as M,Ne as N,P as O,q as P,M as Q,D as R,bt as S,se as T,A as U,xe as V,S as _,a,he as b,jt as c,kt as d,we as e,Rt as f,Ae as g,le as h,ot as i,it as j,L as k,Nt as l,rt as m,gt as n,je as o,G as p,C as q,et as r,v as s,j as t,me as u,$ as v,H as w,mt as x,J as y,z};
