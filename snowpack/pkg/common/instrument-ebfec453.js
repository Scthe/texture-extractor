import{E as y,p as k,H as d,a as p,M as O,F as S,r as C,I as T}from"./hub-e13ed0b5.js";function E(){if(!("fetch"in y()))return!1;try{return new Headers,new Request(""),new Response,!0}catch(t){return!1}}function b(t){return t&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(t.toString())}function j(){if(!E())return!1;var t=y();if(b(t.fetch))return!0;var n=!1,r=t.document;if(r&&typeof r.createElement=="function")try{var e=r.createElement("iframe");e.hidden=!0,r.head.appendChild(e),e.contentWindow&&e.contentWindow.fetch&&(n=b(e.contentWindow.fetch)),r.head.removeChild(e)}catch(a){k.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",a)}return n}function q(){if(!E())return!1;try{return new Request("_",{referrerPolicy:"origin"}),!0}catch(t){return!1}}function M(){var t=y(),n=t.chrome,r=n&&n.app&&n.app.runtime,e="history"in t&&!!t.history.pushState&&!!t.history.replaceState;return!r&&e}var i=y(),v={},R={};function N(t){if(!R[t])switch(R[t]=!0,t){case"console":U();break;case"dom":$();break;case"xhr":W();break;case"fetch":I();break;case"history":G();break;case"error":z();break;case"unhandledrejection":B();break;default:k.warn("unknown instrumentation type:",t)}}function P(t){!t||typeof t.type!="string"||typeof t.callback!="function"||(v[t.type]=v[t.type]||[],v[t.type].push(t.callback),N(t.type))}function l(t,n){var r,e;if(!(!t||!v[t]))try{for(var a=C(v[t]||[]),u=a.next();!u.done;u=a.next()){var o=u.value;try{o(n)}catch(s){k.error(`Error while triggering instrumentation handler.
Type: `+t+`
Name: `+T(o)+`
Error: `+s)}}}catch(s){r={error:s}}finally{try{u&&!u.done&&(e=a.return)&&e.call(a)}finally{if(r)throw r.error}}}function U(){"console"in i&&["debug","info","warn","error","log","assert"].forEach(function(t){t in i.console&&d(i.console,t,function(n){return function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];l("console",{args:r,level:t}),n&&Function.prototype.apply.call(n,i.console,r)}})})}function I(){!j()||d(i,"fetch",function(t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var e={args:n,fetchData:{method:F(n),url:X(n)},startTimestamp:Date.now()};return l("fetch",p({},e)),t.apply(i,n).then(function(a){return l("fetch",p(p({},e),{endTimestamp:Date.now(),response:a})),a},function(a){throw l("fetch",p(p({},e),{endTimestamp:Date.now(),error:a})),a})}})}function F(t){return t===void 0&&(t=[]),"Request"in i&&O(t[0],Request)&&t[0].method?String(t[0].method).toUpperCase():t[1]&&t[1].method?String(t[1].method).toUpperCase():"GET"}function X(t){return t===void 0&&(t=[]),typeof t[0]=="string"?t[0]:"Request"in i&&O(t[0],Request)?t[0].url:String(t[0])}function W(){if("XMLHttpRequest"in i){var t=[],n=[],r=XMLHttpRequest.prototype;d(r,"open",function(e){return function(){for(var a=[],u=0;u<arguments.length;u++)a[u]=arguments[u];var o=this,s=a[1];o.__sentry_xhr__={method:S(a[0])?a[0].toUpperCase():a[0],url:a[1]},S(s)&&o.__sentry_xhr__.method==="POST"&&s.match(/sentry_key/)&&(o.__sentry_own_request__=!0);var m=function(){if(o.readyState===4){try{o.__sentry_xhr__&&(o.__sentry_xhr__.status_code=o.status)}catch(h){}try{var f=t.indexOf(o);if(f!==-1){t.splice(f);var c=n.splice(f)[0];o.__sentry_xhr__&&c[0]!==void 0&&(o.__sentry_xhr__.body=c[0])}}catch(h){}l("xhr",{args:a,endTimestamp:Date.now(),startTimestamp:Date.now(),xhr:o})}};return"onreadystatechange"in o&&typeof o.onreadystatechange=="function"?d(o,"onreadystatechange",function(f){return function(){for(var c=[],h=0;h<arguments.length;h++)c[h]=arguments[h];return m(),f.apply(o,c)}}):o.addEventListener("readystatechange",m),e.apply(o,a)}}),d(r,"send",function(e){return function(){for(var a=[],u=0;u<arguments.length;u++)a[u]=arguments[u];return t.push(this),n.push(a),l("xhr",{args:a,startTimestamp:Date.now(),xhr:this}),e.apply(this,a)}})}}var g;function G(){if(!M())return;var t=i.onpopstate;i.onpopstate=function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var a=i.location.href,u=g;if(g=a,l("history",{from:u,to:a}),t)try{return t.apply(this,r)}catch(o){}};function n(r){return function(){for(var e=[],a=0;a<arguments.length;a++)e[a]=arguments[a];var u=e.length>2?e[2]:void 0;if(u){var o=g,s=String(u);g=s,l("history",{from:o,to:s})}return r.apply(this,e)}}d(i.history,"pushState",n),d(i.history,"replaceState",n)}var L=1e3,_,w;function K(t,n){if(!t||t.type!==n.type)return!0;try{if(t.target!==n.target)return!0}catch(r){}return!1}function V(t){if(t.type!=="keypress")return!1;try{var n=t.target;if(!n||!n.tagName)return!0;if(n.tagName==="INPUT"||n.tagName==="TEXTAREA"||n.isContentEditable)return!1}catch(r){}return!0}function x(t,n){return n===void 0&&(n=!1),function(r){if(!(!r||w===r)&&!V(r)){var e=r.type==="keypress"?"input":r.type;_===void 0?(t({event:r,name:e,global:n}),w=r):K(w,r)&&(t({event:r,name:e,global:n}),w=r),clearTimeout(_),_=i.setTimeout(function(){_=void 0},L)}}}function $(){if("document"in i){var t=l.bind(null,"dom"),n=x(t,!0);i.document.addEventListener("click",n,!1),i.document.addEventListener("keypress",n,!1),["EventTarget","Node"].forEach(function(r){var e=i[r]&&i[r].prototype;!e||!e.hasOwnProperty||!e.hasOwnProperty("addEventListener")||(d(e,"addEventListener",function(a){return function(u,o,s){if(u==="click"||u=="keypress")try{var m=this,f=m.__sentry_instrumentation_handlers__=m.__sentry_instrumentation_handlers__||{},c=f[u]=f[u]||{refCount:0};if(!c.handler){var h=x(t);c.handler=h,a.call(this,u,h,s)}c.refCount+=1}catch(J){}return a.call(this,u,o,s)}}),d(e,"removeEventListener",function(a){return function(u,o,s){if(u==="click"||u=="keypress")try{var m=this,f=m.__sentry_instrumentation_handlers__||{},c=f[u];c&&(c.refCount-=1,c.refCount<=0&&(a.call(this,u,c.handler,s),c.handler=void 0,delete f[u]),Object.keys(f).length===0&&delete m.__sentry_instrumentation_handlers__)}catch(h){}return a.call(this,u,o,s)}}))})}}var H=null;function z(){H=i.onerror,i.onerror=function(t,n,r,e,a){return l("error",{column:e,error:a,line:r,msg:t,url:n}),H?H.apply(this,arguments):!1}}var D=null;function B(){D=i.onunhandledrejection,i.onunhandledrejection=function(t){return l("unhandledrejection",t),D?D.apply(this,arguments):!0}}export{E as a,P as b,b as i,q as s};
