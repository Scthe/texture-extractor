import{g as k,c as x}from"./common/_commonjsHelpers-8c19dec8.js";import{c as f}from"./common/compat.module-a7984ad9.js";import"./common/hooks.module-3521e8d2.js";import"./common/preact.module-8882e5ac.js";var A=x(function(D,R){Object.defineProperty(R,"__esModule",{value:!0});function h(m){var e,o=new Set,p=function(t,n){var r=typeof t=="function"?t(e):t;if(r!==e){var u=e;e=n?r:Object.assign({},e,r),o.forEach(function(i){return i(e,u)})}},a=function(){return e},s=function(t,n,r){n===void 0&&(n=a),r===void 0&&(r=Object.is);var u=n(e);function i(){var v=n(e);if(!r(u,v)){var l=u;t(u=v,l)}}return o.add(i),function(){return o.delete(i)}},g=function(t,n,r){return n||r?s(t,n,r):(o.add(t),function(){return o.delete(t)})},S=function(){return o.clear()},c={setState:p,getState:a,subscribe:g,destroy:S};return e=m(p,a,c),c}var y=typeof window=="undefined"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),_=y?f.useEffect:f.useLayoutEffect;function E(m){var e=typeof m=="function"?h(m):m,o=function(a,s){a===void 0&&(a=e.getState),s===void 0&&(s=Object.is);var g=f.useReducer(function(b){return b+1},0),S=g[1],c=e.getState(),d=f.useRef(c),t=f.useRef(a),n=f.useRef(s),r=f.useRef(!1),u=f.useRef();u.current===void 0&&(u.current=a(c));var i,v=!1;(d.current!==c||t.current!==a||n.current!==s||r.current)&&(i=a(c),v=!s(u.current,i)),_(function(){v&&(u.current=i),d.current=c,t.current=a,n.current=s,r.current=!1});var l=f.useRef(c);return _(function(){var b=function(){try{var j=e.getState(),w=t.current(j);n.current(u.current,w)||(d.current=j,u.current=w,S())}catch(M){r.current=!0,S()}},O=e.subscribe(b);return e.getState()!==l.current&&b(),O},[]),v?i:u.current};return Object.assign(o,e),o[Symbol.iterator]=function*(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4"),yield o,yield e},o}R.default=E}),C=k(A);export default C;
