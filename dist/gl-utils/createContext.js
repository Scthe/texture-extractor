import{logError as i}from"../utils/log.js";import a from"./gimme_gl.js";const l='This page requires a browser that supports WebGL 2.0.<br/><a href="http://get.webgl.org">Click here to upgrade your browser.</a>',c=`It doesn't appear your computer can support WebGL 2.0.<br/><a href="http://get.webgl.org/troubleshooting/">Click here for more information.</a>`,g=function(t){return'<table style="background-color: #8CE; width: 100%; height: 100%;"><tr><td align="center"><div style="display: table-cell; vertical-align: middle;"><br/><br/><div style="">Status: '+t+"</div></div></td></tr></table>"},s=(t,r)=>{const e=t.parentNode;e&&(e.innerHTML=g(r))},b=t=>t&&t instanceof WebGL2RenderingContext,d=(t,r)=>{const e=t.getContext("webgl2",r);if(!b(e))throw a?c:l;return e},u=(t,r)=>{r.forEach(e=>{if(!t.getExtension(e))throw`Your browser does not support '${e}' extension`})};export const createWebGl2Context=(t,r,e)=>{t.addEventListener&&t.addEventListener("webglcontextcreationerror",o=>s(t,o.statusMessage),!1);let n;try{n=d(t,r),u(n,e)}catch(o){throw i("Error creating WebGL context",o),s(t,o.statusMessage||o),o}return n};
