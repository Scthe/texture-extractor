import{css as g}from"../../../snowpack/pkg/@emotion/css.js";import{h as o}from"../../../snowpack/pkg/preact.js";import{useEffect as d,useRef as l}from"../../../snowpack/pkg/preact/hooks.js";import{useAppStatePartial as f}from"../../state/AppState.js";import{RectSvg as k}from"../../components/RectSvg.js";import*as j from"../../style.js";const u=g`
  opacity: 0.4;
`;export const ImageWorkspace=({borderSafeSpace:c,imageData:t,isDimed:p,zoom:n,onDragEnd:i,onDragging:a})=>{const{rectangles:r}=f("rectangles"),e=l();d(()=>{const s=e.current;s.width=t.data.width,s.height=t.data.height,s.getContext("2d").putImageData(t.data,0,0)},[t]);const{width:h,height:m}=t.data;return o("div",{style:[`width: ${h+2*c}px;`,`height: ${m+2*c}px;`].join(" ")},o("canvas",{ref:e,class:p?u:"",style:`padding: ${c}px;`}),o("svg",{class:j.fillAbsolute},(r||[]).map(s=>o(k,{rect:s,scale:n,imageData:t,onDragEnd:i,onDragging:a}))))};
