import{h as s}from"../snowpack/pkg/preact.js";import{useCallback as c,useEffect as i,useRef as f}from"../snowpack/pkg/preact/hooks.js";import{createPortal as u}from"../snowpack/pkg/preact/compat.js";import{css as d,cx as k}from"../snowpack/pkg/@emotion/css.js";import"../snowpack/pkg/pinch-zoom-element.js";import{UVscreen as g}from"./screens/UVscreen/index.js";import{ImageScreen as j}from"./screens/ImageScreen/index.js";import{WelcomeModal as w}from"./screens/WelcomeModal/index.js";import{ErrorFallback as x}from"./screens/ErrorFallback.js";import{useAppState as h}from"./state/AppState.js";import{useLatest as E}from"./hooks/useLatest.js";import{withErrorBoundary as b}from"./utils/withErrorBoundary.js";import*as a from"./style.js";export const modalContainer=document.getElementById("modals");const y=d`
  display: flex;
  flex-direction: row;
`;function R(){const{moveRectangle:m,image:o}=h(),e=f(),n=E(m);i(()=>{const r=(o==null?void 0:o.filename)||"";document.title=r.length>0?r:"Texture Extractor"},[o]);const p=c((r,t)=>{e.current&&e.current.redrawWebGl(t)},[]),l=c((r,t)=>{e.current&&e.current.redrawWebGl(t),n.current(r,t)},[n]);return s("div",{class:k(a.theme(a.ThemePurple),y)},s(g,{ref:e}),s(j,{onDragging:p,onDragEnd:l}),u(s(w,null),modalContainer))}export default b(R,{fallback:x});
